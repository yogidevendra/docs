<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../favicon.ico">
  
  <title>Application Packages - DataTorrent Documentation</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Application Packages";
    var mkdocs_page_input_path = "application_packages.md";
    var mkdocs_page_url = "/application_packages/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-44586211-2', 'docs.datatorrent.com');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> DataTorrent Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">DataTorrent RTS</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Demos</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../demos/">Running Apps</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../sandbox/">Sandbox</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Cloud Integration</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../aws_emr_manual/">AWS</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Development</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../create/">Creating Applications</a>
                </li>
                <li class="">
                    
    <a class="" href="../beginner/">Beginner's Guide</a>
                </li>
                <li class="">
                    
    <a class="" href="../demo_videos/">Videos</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <span class="caption-text">Top N Words</span>
    <ul class="subnav">
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/topnwords/">Introduction</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/topnwords-c1/">Development Environment</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/topnwords-c2/">Building in Java</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/topnwords-c3/">Building with dtAssemble</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/topnwords-c4/">Monitoring with dtManage</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/topnwords-c5/">Visualizing with dtDashboard</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/topnwords-c7/">Advanced Features</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/topnwords-c6/">Appendix</a>
                </li>
    </ul>
                </li>
                <li class="toctree-l3">
                    
    <span class="caption-text">Sales Dimensions</span>
    <ul class="subnav">
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/salesdimensions/">Building in Java</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/salesdimensions-c2/">Building with dtAssemble</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/salesdimensions-c3/">Visualizing with dtDashboard</a>
                </li>
                <li class="toctree-l4">
                    
    <a class="" href="../tutorials/salesdimensions-c4/">Monitoring with dtManage</a>
                </li>
    </ul>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../apex_development_setup/">Apex Development Setup</a>
                </li>
                <li class="">
                    
    <a class="" href="../configure_IDE/">Generate New Project in IDE</a>
                </li>
                <li class="">
                    
    <a class="" href="../application_development/">Applications</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">Application Packages</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#apache-apex-application-packages">Apache Apex Application Packages</a></li>
    

    <li class="toctree-l3"><a href="#preliminaries">Preliminaries</a></li>
    

    <li class="toctree-l3"><a href="#writing-your-own-app-package">Writing Your Own App Package</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#adding-and-removing-project-dependencies">Adding (and removing) project dependencies</a></li>
        
            <li><a class="toctree-l4" href="#application-configuration">Application Configuration</a></li>
        
            <li><a class="toctree-l4" href="#application-attributes">Application attributes</a></li>
        
            <li><a class="toctree-l4" href="#operator-attributes">Operator attributes</a></li>
        
            <li><a class="toctree-l4" href="#operator-properties">Operator properties</a></li>
        
            <li><a class="toctree-l4" href="#port-attributes">Port attributes</a></li>
        
            <li><a class="toctree-l4" href="#stream-properties">Stream properties</a></li>
        
            <li><a class="toctree-l4" href="#wildcards">Wildcards</a></li>
        
            <li><a class="toctree-l4" href="#adding-configuration-properties">Adding configuration properties</a></li>
        
            <li><a class="toctree-l4" href="#adding-pre-set-configurations">Adding pre-set configurations</a></li>
        
            <li><a class="toctree-l4" href="#application-specific-properties-file">Application-specific properties file</a></li>
        
            <li><a class="toctree-l4" href="#properties-source-precedence">Properties source precedence</a></li>
        
            <li><a class="toctree-l4" href="#other-meta-data">Other meta-data</a></li>
        
            <li><a class="toctree-l4" href="#logging-configuration">Logging configuration</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#zip-structure-of-application-package">Zip Structure of Application Package</a></li>
    

    <li class="toctree-l3"><a href="#managing-application-packages-through-dt-gateway">Managing Application Packages Through DT Gateway</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#storing-an-application-package">Storing an Application Package</a></li>
        
            <li><a class="toctree-l4" href="#getting-meta-information-on-application-packages">Getting Meta Information on Application Packages</a></li>
        
            <li><a class="toctree-l4" href="#getting-available-operators-in-application-package">Getting Available Operators In Application Package</a></li>
        
            <li><a class="toctree-l4" href="#getting-properties-of-operators-in-application-package">Getting Properties of Operators in Application Package</a></li>
        
            <li><a class="toctree-l4" href="#getting-list-of-pre-set-configurations-in-application-package">Getting List of Pre-Set Configurations in Application Package</a></li>
        
            <li><a class="toctree-l4" href="#changing-pre-set-configurations-in-application-package">Changing Pre-Set Configurations in Application Package</a></li>
        
            <li><a class="toctree-l4" href="#retrieving-an-application-package">Retrieving an Application Package</a></li>
        
            <li><a class="toctree-l4" href="#launching-an-application-package">Launching an Application Package</a></li>
        
        </ul>
    

    <li class="toctree-l3"><a href="#examining-and-launching-application-packages-through-apex-cli">Examining and Launching Application Packages Through Apex CLI</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#getting-application-package-meta-information">Getting Application Package Meta Information</a></li>
        
            <li><a class="toctree-l4" href="#getting-available-operators-in-application-package_1">Getting Available Operators In Application Package</a></li>
        
            <li><a class="toctree-l4" href="#getting-properties-of-operators-in-application-package_1">Getting Properties of Operators in Application Package</a></li>
        
            <li><a class="toctree-l4" href="#launching-an-application-package_1">Launching an Application Package</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../configuration_packages/">Configuration Packages</a>
                </li>
                <li class="">
                    
    <a class="" href="../operator_development/">Operators</a>
                </li>
                <li class="">
                    
    <span class="caption-text">Library Operators</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../library_operators/">List of Operators</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../operators/block_reader/">Block Reader</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../operators/deduper/">Deduper</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../operators/dimensions_computation/">Dimension Computation</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../operators/file_output/">File Output</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../operators/file_splitter/">File Splitter</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../operators/hdht/">HDHT</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../operators/kafkaInputOperator/">Kafka Input</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../operators/snapshot_server/">Snapshot Server</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../app_data_framework/">App Data Framework</a>
                </li>
                <li class="">
                    
    <a class="" href="../dtgateway_api/">REST API</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">App Templates</span>
    <ul class="subnav">
                <li class="">
                    
    <span class="caption-text">0.10.0</span>
    <ul class="subnav">
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/common/import-launch/">Import and Launch App-template</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/common/customize/">Customizing an app-template</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/database-to-database-sync/">Database-to-database-sync</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/hdfs-line-copy/">HDFS-line-copy</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/hdfs-part-file-copy/">HDFS-part-file-copy</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/hdfs-to-hdfs-filter-transform/">HDFS-to-HDFS-filter-transform</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/kafka-to-cassandra-filter-transform/">Kafka-to-Cassandra-Filter-Transform</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/kafka-to-database-sync/">Kafka-to-Database-sync</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/kafka-to-hdfs-filter-transform/">Kafka-to-HDFS-Filter-Transform</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/kafka-to-kafka-filter-transform/">Kafka-to-Kafka-Filter-Transform</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/kinesis-to-redshift/">Kinesis-to-Redshift</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/kinesis-to-s3/">Kinesis-to-S3</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/s3-to-hdfs-sync/">S3-to-HDFS-sync</a>
                </li>
                <li class="toctree-l3">
                    
    <a class="" href="../app-templates/0.10.0/s3-to-redshift/">S3-to-HDFS-Filter-Transform</a>
                </li>
    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../app-templates/database-to-hdfs/">Database dump to HDFS App</a>
                </li>
                <li class="">
                    
    <a class="" href="../app-templates/database-to-database-sync/">Database to Database Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../app-templates/hdfs-sync/">HDFS Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../app-templates/hdfs-line-copy/">HDFS to HDFS Line Copy App</a>
                </li>
                <li class="">
                    
    <a class="" href="../app-templates/hdfs-to-kafka-sync/">HDFS to Kafka Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../app-templates/kafka-to-database-sync/">Kafka to Database Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../app-templates/kafka-to-hdfs-filter/">Kafka to HDFS Filter App</a>
                </li>
                <li class="">
                    
    <a class="" href="../app-templates/kafka-to-hdfs-sync/">Kafka to HDFS Sync App</a>
                </li>
                <li class="">
                    
    <a class="" href="../app-templates/kinesis-to-s3/">Kinesis to S3 App</a>
                </li>
                <li class="">
                    
    <a class="" href="../app-templates/s3-to-hdfs-sync/">S3 to HDFS Sync App</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Applications</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../app_data_tracker/">App Data Tracker</a>
                </li>
                <li class="">
                    
    <a class="" href="../dtingest/">dtIngest</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Platform</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../rts/">RTS</a>
                </li>
                <li class="">
                    
    <a class="" href="../application_configurations/">Application Configurations</a>
                </li>
                <li class="">
                    
    <a class="" href="../dtmanage/">dtManage</a>
                </li>
                <li class="">
                    
    <a class="" href="../dtassemble/">dtAssemble</a>
                </li>
                <li class="">
                    
    <a class="" href="../dtdashboard/">dtDashboard</a>
                </li>
                <li class="">
                    
    <a class="" href="../dtgateway/">dtGateway</a>
                </li>
                <li class="">
                    
    <a class="" href="../dtgateway_systemalerts/">Alerts</a>
                </li>
                <li class="">
                    
    <a class="" href="../apex/">Apache Apex</a>
                </li>
                <li class="">
                    
    <a class="" href="../apex_malhar/">Apache Apex-Malhar</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Deployment and Operations</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../installation/">Installation</a>
                </li>
                <li class="">
                    
    <a class="" href="../configuration/">Configuration</a>
                </li>
                <li class="">
                    
    <a class="" href="../dtgateway_security/">Security</a>
                </li>
                <li class="">
                    
    <a class="" href="../dtgateway_systemalerts/">System Alerts</a>
                </li>
                <li class="">
                    
    <a class="" href="../apexcli/">Apex CLI</a>
                </li>
                <li class="">
                    
    <a class="" href="../troubleshooting/">Troubleshooting</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../release_notes/">Release Notes</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../glossary/">Glossary</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../additional_docs/">Resources</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">DataTorrent Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
        
          <li>Development &raquo;</li>
        
      
    
    <li>Application Packages</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="apache-apex-application-packages">Apache Apex Application Packages</h1>
<p>An Apache Apex Application Package is a zip file that contains all the
necessary files to launch an application in Apache Apex. It is the
standard way for assembling and sharing an Apache Apex application.</p>
<h1 id="preliminaries">Preliminaries</h1>
<p>Please read <a href="../apex_development_setup/">Apache Apex Development Environment Setup</a>
for detailed instructions on:</p>
<ul>
<li>Pre-requisite tools such as JDK, Maven, Git, etc.</li>
<li>Setting up the Datatorrent sandbox, if necessary.</li>
<li>Creating a new Apache Apex project using either the command line or one of the
  common IDEs.</li>
<li>Running the unit test from the newly created project.</li>
</ul>
<h1 id="writing-your-own-app-package">Writing Your Own App Package</h1>
<p>Please refer to the <a href="../beginner/">Beginner's Guide</a> on the basics on how to write an Apache Apex application.  In your AppPackage project, you can add custom operators (refer to <a href="https://www.datatorrent.com/docs/guides/OperatorDeveloperGuide.html">Operator Development Guide</a>), project dependencies, default and required configuration properties, pre-set configurations and other metadata.</p>
<h2 id="adding-and-removing-project-dependencies">Adding (and removing) project dependencies</h2>
<p>Under the project, you can add project dependencies in pom.xml, or do it
through your IDE.  Here’s the section that describes the dependencies in
the default pom.xml:</p>
<pre><code>  &lt;dependencies&gt;
    &lt;!-- add your dependencies here --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.apex&lt;/groupId&gt;
      &lt;artifactId&gt;malhar-library&lt;/artifactId&gt;
      &lt;version&gt;${apex.version}&lt;/version&gt;
      &lt;!--
           If you know your application do not need the transitive dependencies that are pulled in by malhar-library,
           Uncomment the following to reduce the size of your app package.
      --&gt;
      &lt;!--
      &lt;exclusions&gt;
        &lt;exclusion&gt;
          &lt;groupId&gt;*&lt;/groupId&gt;
          &lt;artifactId&gt;*&lt;/artifactId&gt;
        &lt;/exclusion&gt;
      &lt;/exclusions&gt;
      --&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.apex&lt;/groupId&gt;
      &lt;artifactId&gt;apex-engine&lt;/artifactId&gt;
      &lt;version&gt;${apex.version}&lt;/version&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;4.10&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;
</code></pre>

<p>By default, as shown above, the default dependencies include
malhar-library in compile scope, apex-engine in provided scope, and junit
in test scope.  Do not remove these three dependencies since they are
necessary for any Apex application.  You can, however, exclude
transitive dependencies from malhar-library to reduce the size of your
App Package, provided that none of the operators in malhar-library that
need the transitive dependencies will be used in your application.</p>
<p>In the sample application, it is safe to remove the transitive
dependencies from malhar-library, by uncommenting the "exclusions"
section.  It will reduce the size of the sample App Package from 8MB to
700KB.</p>
<p>Note that if we exclude *, in some versions of Maven, you may get
warnings similar to the following:</p>
<pre><code>
 [WARNING] 'dependencies.dependency.exclusions.exclusion.groupId' for
 org.apache.apex:malhar-library:jar with value '*' does not match a
 valid id pattern.

 [WARNING]
 [WARNING] It is highly recommended to fix these problems because they
 threaten the stability of your build.
 [WARNING]
 [WARNING] For this reason, future Maven versions might no longer support
 building such malformed projects.
 [WARNING]

</code></pre>

<p>This is a bug in early versions of Maven 3.  The dependency exclusion is
still valid and it is safe to ignore these warnings.</p>
<h2 id="application-configuration">Application Configuration</h2>
<p>A configuration file can be used to configure an application.  Different
kinds of configuration parameters can be specified. They are application
attributes, operator attributes and properties, port attributes, stream
properties and application specific properties. They are all specified
as name value pairs, in XML format, like the following.</p>
<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;some_name_1&lt;/name&gt;
    &lt;value&gt;some_default_value&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;some_name_2&lt;/name&gt;
    &lt;value&gt;some_default_value&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<h2 id="application-attributes">Application attributes</h2>
<p>Application attributes are used to specify the platform behavior for the
application. They can be specified using the parameter
<code>dt.attr.&lt;attribute&gt;</code>. The prefix <code>dt</code> is a constant, <code>attr</code> is a
constant denoting an attribute is being specified and <code>&lt;attribute&gt;</code>
specifies the name of the attribute. Below is an example snippet setting
the streaming windows size of the application to be 1000 milliseconds.</p>
<pre><code>  &lt;property&gt;
     &lt;name&gt;dt.attr.STREAMING_WINDOW_SIZE_MILLIS&lt;/name&gt;
     &lt;value&gt;1000&lt;/value&gt;
  &lt;/property&gt;
</code></pre>

<p>The name tag specifies the attribute and value tag specifies the
attribute value. The name of the attribute is a JAVA constant name
identifying the attribute. The constants are defined in
<code>com.datatorrent.api.Context.DAGContext</code> and the different attributes can
be specified in the format described above.</p>
<h2 id="operator-attributes">Operator attributes</h2>
<p>Operator attributes are used to specify the platform behavior for the
operator. They can be specified using the parameter
<code>dt.operator.&lt;operator-name&gt;.attr.&lt;attribute&gt;</code>. The prefix <code>dt</code> is a
constant, <code>operator</code> is a constant denoting that an operator is being
specified, <code>&lt;operator-name&gt;</code> denotes the name of the operator, <code>attr</code> is
the constant denoting that an attribute is being specified and
<code>&lt;attribute&gt;</code> is the name of the attribute. The operator name is the
same name that is specified when the operator is added to the DAG using
the addOperator method. An example illustrating the specification is
shown below. It specifies the number of streaming windows for one
application window of an operator named <code>input</code> to be 10</p>
<pre><code>&lt;property&gt;
  &lt;name&gt;dt.operator.input.attr.APPLICATION_WINDOW_COUNT&lt;/name&gt;
  &lt;value&gt;10&lt;/value&gt;
&lt;/property&gt;
</code></pre>

<p>The name tag specifies the attribute and value tag specifies the
attribute value. The name of the attribute is a JAVA constant name
identifying the attribute. The constants are defined in
<code>com.datatorrent.api.Context.OperatorContext</code> and the different attributes
can be specified in the format described above.</p>
<h2 id="operator-properties">Operator properties</h2>
<p>Operators can be configured using operator specific properties. The
properties can be specified using the parameter
<code>dt.operator.&lt;operator-name&gt;.prop.&lt;property-name&gt;</code>. The difference
between this and the operator attribute specification described above is
that the keyword <code>prop</code> is used to denote that it is a property and
<code>&lt;property-name&gt;</code> specifies the property name.  An example illustrating
this is specified below. It specifies the property <code>host</code> of the
redis server for a <code>redis</code> output operator.</p>
<pre><code>  &lt;property&gt;
    &lt;name&gt;dt.operator.redis.prop.host&lt;/name&gt;
    &lt;value&gt;127.0.0.1&lt;/value&gt;
  &lt;/property&gt;
</code></pre>

<p>The name tag specifies the property and the value specifies the property
value. The property name is converted to a setter method which is called
on the actual operator. The method name is composed by appending the
word <code>set</code> and the property name with the first character of the name
capitalized. In the above example the setter method would become
<code>setHost</code>. The method is called using JAVA reflection and the property
value is passed as an argument. In the above example the method <code>setHost</code>
will be called on the <code>redis</code> operator with <code>127.0.0.1</code> as the argument.</p>
<p>A property that is a simple collection like a list or a map can also be initialized
in this way but it needs a couple of additional steps: (a) The property
must be initialized with an empty collection of the appropriate type.
(b) An additional setter method for initializing items of the collection
must be present. For example, suppose we have properties named <code>list</code>
and <code>map</code> in an operator named <code>opA</code> initialized with empty collections:</p>
<pre><code class="java">  private List&lt;String&gt; list = new ArrayList&lt;&gt;();
  private Map&lt;String, String&gt; map = new HashMap&lt;&gt;();

  public List&lt;String&gt; getList() { return list; }
  public void setList(List&lt;String&gt; v) { list = v; }

  public Map&lt;String, String&gt; getMap() { return map; }
  public void setMap(Map&lt;String, String&gt; v) { map = v; }
</code></pre>

<p>You can add items to those empty collections by using fragments like this in
your properties file provided you also add the setters shown below:</p>
<pre><code>  &lt;property&gt;
    &lt;name&gt;dt.operator.opA.mapItem(abc)&lt;/name&gt;
    &lt;value&gt;123&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;dt.operator.opA.mapItem(pqr)&lt;/name&gt;
    &lt;value&gt;567&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;dt.operator.opA.listItem[0]&lt;/name&gt;
    &lt;value&gt;1000&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;dt.operator.opA.listItem[1]&lt;/name&gt;
    &lt;value&gt;2000&lt;/value&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;dt.operator.opA.listItem[3]&lt;/name&gt;
    &lt;value&gt;3000&lt;/value&gt;
  &lt;/property&gt;
</code></pre>

<p>The required additional setter methods in operator <code>opA</code>:</p>
<pre><code class="java">  public void setListItem(int index, String value) {
    final int need = index - list.size() + 1;
    for (int i = 0; i &lt; need; i++) list.add(null);
    list.set(index, value);
  }

  public void setMapItem(String key, String value) {
    map.put(key, value);
  }
</code></pre>

<h2 id="port-attributes">Port attributes</h2>
<p>Port attributes are used to specify the platform behavior for input and
output ports. They can be specified using the parameter <code>dt.operator.&lt;operator-name&gt;.inputport.&lt;port-name&gt;.attr.&lt;attribute&gt;</code>
for input port and <code>dt.operator.&lt;operator-name&gt;.outputport.&lt;port-name&gt;.attr.&lt;attribute&gt;</code>
for output port. The keyword <code>inputport</code> is used to denote an input port
and <code>outputport</code> to denote an output port. The rest of the specification
follows the conventions described in other specifications above. An
example illustrating this is specified below. It specifies the queue
capacity for an input port named <code>input</code> of an operator named <code>range</code> to
be 4000.</p>
<pre><code>&lt;property&gt;
  &lt;name&gt;dt.operator.range.inputport.input.attr.QUEUE_CAPACITY&lt;/name&gt;
  &lt;value&gt;4000&lt;/value&gt;
&lt;/property&gt;
</code></pre>

<p>The name tag specifies the attribute and value tag specifies the
attribute value. The name of the attribute is a JAVA constant name
identifying the attribute. The constants are defined in
com.datatorrent.api.Context.PortContext and the different attributes can
be specified in the format described above.</p>
<p>The attributes for an output port can also be specified in a similar way
as described above with a change that keyword “outputport” is used
instead of “inputport”. A generic keyword “port” can be used to specify
either an input or an output port. It is useful in the wildcard
specification described below.</p>
<h2 id="stream-properties">Stream properties</h2>
<p>Streams can be configured using stream properties. The properties can be
specified using the parameter
<code>dt.stream.&lt;stream-name&gt;.prop.&lt;property-name&gt;</code>  The constant “stream”
specifies that it is a stream, <code>&lt;stream-name&gt;</code> specifies the name of the
stream and <code>&lt;property-name&gt;</code> the name of the property. The name of the
stream is the same name that is passed when the stream is added to the
DAG using the addStream method. An example illustrating the
specification is shown below. It sets the locality of the stream named
“stream1” to container local indicating that the operators the stream is
connecting be run in the same container.</p>
<pre><code>  &lt;property&gt;
    &lt;name&gt;dt.stream.stream1.prop.locality&lt;/name&gt;
    &lt;value&gt;CONTAINER_LOCAL&lt;/value&gt;
  &lt;/property&gt;
</code></pre>

<p>The property name is converted into a set method on the stream in the
same way as described in operator properties section above. In this case
the method would be setLocality and it will be called in the stream
“stream1” with the value as the argument.</p>
<p>Along with the above system defined parameters, the applications can
define their own specific parameters they can be specified in the
configuration file. The only condition is that the names of these
parameters don’t conflict with the system defined parameters or similar
application parameters defined by other applications. To this end, it is
recommended that the application parameters have the format
<code>&lt;full-application-class-name&gt;.&lt;param-name&gt;.</code> The
full-application-class-name is the full JAVA class name of the
application including the package path and param-name is the name of the
parameter within the application. The application will still have to
still read the parameter in using the configuration API of the
configuration object that is passed in populateDAG.</p>
<h2 id="wildcards">Wildcards</h2>
<p>Wildcards and regular expressions can be used in place of names to
specify a group for applications, operators, ports or streams. For
example, to specify an attribute for all ports of an operator it can be
done as follows</p>
<pre><code>&lt;property&gt;
  &lt;name&gt;dt.operator.range.port.*.attr.QUEUE_CAPACITY&lt;/name&gt;
  &lt;value&gt;4000&lt;/value&gt;
&lt;/property&gt;
</code></pre>

<p>The wildcard “*” was used instead of the name of the port. Wildcard can
also be used for operator name, stream name or application name. Regular
expressions can also be used for names to specify attributes or
properties for a specific set.</p>
<h2 id="adding-configuration-properties">Adding configuration properties</h2>
<p>It is common for applications to require configuration parameters to
run.  For example, the address and port of the database, the location of
a file for ingestion, etc.  You can specify them in
src/main/resources/META-INF/properties.xml under the App Package
project. The properties.xml may look like:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;configuration&gt;
  &lt;property&gt;
    &lt;name&gt;some_name_1&lt;/name&gt;
  &lt;/property&gt;
  &lt;property&gt;
    &lt;name&gt;some_name_2&lt;/name&gt;
    &lt;value&gt;some_default_value&lt;/value&gt;
  &lt;/property&gt;
&lt;/configuration&gt;
</code></pre>

<p>The name of an application-specific property takes the form of:</p>
<p><code>dt.operator.{opName}.prop.{propName}</code></p>
<p>The first represents the property with name propName of operator opName.
 Or you can set the application name at run time by setting this
property:</p>
<pre><code>    dt.attr.APPLICATION_NAME
</code></pre>
<p>There are also other properties that can be set.  For details on
properties, refer to the <a href="https://www.datatorrent.com/docs/guides/OperationandInstallationGuide.html">Operation and Installation Guide</a>.</p>
<p>In this example, property some_name_1 is a required property which
must be set at launch time, or it must be set by a pre-set configuration
(see next section).  Property some_name_2 is a property that is
assigned with value some_default_value unless it is overridden at
launch time.</p>
<h2 id="adding-pre-set-configurations">Adding pre-set configurations</h2>
<p>At build time, you can add pre-set configurations to the App Package by
adding configuration XML files under <code>src/site/conf/&lt;conf&gt;.xml</code>in your
project.  You can then specify which configuration to use at launch
time.  The configuration XML is of the same format of the properties.xml
file.</p>
<h2 id="application-specific-properties-file">Application-specific properties file</h2>
<p>You can also specify properties.xml per application in the application
package.  Just create a file with the name properties-{appName}.xml and
it will be picked up when you launch the application with the specified
name within the application package.  In short:</p>
<p>properties.xml: Properties that are global to the Configuration
Package</p>
<p>properties-{appName}.xml: Properties that are specific when launching
an application with the specified appName.</p>
<h2 id="properties-source-precedence">Properties source precedence</h2>
<p>If properties with the same key appear in multiple sources (e.g. from
app package default configuration as META-INF/properties.xml, from app
package configuration in the conf directory, from launch time defines,
etc), the precedence of sources, from highest to lowest, is as follows:</p>
<ol>
<li>Launch time defines (using -D option in CLI, or the POST payload
    with the Gateway REST API’s launch call)</li>
<li>Launch time specified configuration file in file system (using -conf
    option in CLI)</li>
<li>Launch time specified package configuration (using -apconf option in
    CLI or the conf={confname} with Gateway REST API’s launch call)</li>
<li>Configuration from \$HOME/.dt/dt-site.xml</li>
<li>Application defaults within the package as
    META-INF/properties-{appname}.xml</li>
<li>Package defaults as META-INF/properties.xml</li>
<li>dt-site.xml in local DT installation</li>
<li>dt-site.xml stored in HDFS</li>
</ol>
<h2 id="other-meta-data">Other meta-data</h2>
<p>In a Apex App Package project, the pom.xml file contains a
section that looks like:</p>
<pre><code>&lt;properties&gt;
  &lt;apex.version&gt;3.2.0-incubating&lt;/apex.version&gt;
  &lt;apex.apppackage.classpath\&gt;lib*.jar&lt;/apex.apppackage.classpath&gt;
&lt;/properties&gt;
</code></pre>

<p>apex.version is the Apache Apex version that are to be used
with this Application Package.</p>
<p>apex.apppackage.classpath is the classpath that is used when
launching the application in the Application Package.  The default is
lib/*.jar, where lib is where all the dependency jars are kept within
the Application Package.  One reason to change this field is when your
Application Package needs the classpath in a specific order.</p>
<h2 id="logging-configuration">Logging configuration</h2>
<p>Just like other Java projects, you can change the logging configuration
by having your log4j.properties under src/main/resources.  For example,
if you have the following in src/main/resources/log4j.properties:</p>
<pre><code> log4j.rootLogger=WARN,CONSOLE
 log4j.appender.CONSOLE=org.apache.log4j.ConsoleAppender
 log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout
 log4j.appender.CONSOLE.layout.ConversionPattern=%d{ISO8601} [%t] %-5p
 %c{2} %M - %m%n
</code></pre>

<p>The root logger’s level is set to WARN and the output is set to the console (stdout).</p>
<p>Note that by default from project created from the maven archetype,
there is already a log4j.properties file under src/test/resources and
that file is only used for the unit test.</p>
<h1 id="zip-structure-of-application-package">Zip Structure of Application Package</h1>
<p>Apache Apex Application Package files are zip files.  You can examine the content of any Application Package by using unzip -t on your Linux command line.</p>
<p>There are four top level directories in an Application Package:</p>
<ol>
<li>"app" contains the jar files of the DAG code and any custom operators.</li>
<li>"lib" contains all dependency jars</li>
<li>"conf" contains all the pre-set configuration XML files.</li>
<li>"META-INF" contains the MANIFEST.MF file and the properties.xml file.</li>
<li>“resources” contains other files that are to be served by the Gateway on behalf of the app package.</li>
</ol>
<h1 id="managing-application-packages-through-dt-gateway">Managing Application Packages Through DT Gateway</h1>
<p>The DT Gateway provides storing and retrieving Application Packages to
and from your distributed file system, e.g. HDFS.</p>
<h2 id="storing-an-application-package">Storing an Application Package</h2>
<p>You can store your Application Packages through DT Gateway using this
REST call:</p>
<pre><code> POST /ws/v2/appPackages
</code></pre>

<p>The payload is the raw content of your Application Package.  For
example, you can issue this request using curl on your Linux command
line like this, assuming your DT Gateway is accepting requests at
localhost:9090:</p>
<pre><code>$ curl -XPOST -T &lt;app-package-file&gt; http://localhost:9090/ws/v2/appPackages
</code></pre>

<h2 id="getting-meta-information-on-application-packages">Getting Meta Information on Application Packages</h2>
<p>You can get the meta information on Application Packages stored through
DT Gateway using this call.  The information includes the logical plan
of each application within the Application Package.</p>
<pre><code> GET /ws/v2/appPackages/{owner}/{pkgName}/{pkgVersion}
</code></pre>

<h2 id="getting-available-operators-in-application-package">Getting Available Operators In Application Package</h2>
<p>You can get the list of available operators in the Application Package
using this call.</p>
<pre><code>GET /ws/v2/appPackages/{owner}/{pkgName}/{pkgVersion}/operators?parent={parent}
</code></pre>

<p>The parent parameter is optional.  If given, parent should be the fully
qualified class name.  It will only return operators that derive from
that class or interface. For example, if parent is
com.datatorrent.api.InputOperator, this call will only return input
operators provided by the Application Package.</p>
<h2 id="getting-properties-of-operators-in-application-package">Getting Properties of Operators in Application Package</h2>
<p>You can get the list of properties of any operator in the Application
Package using this call.</p>
<pre><code>GET  /ws/v2/appPackages/{owner}/{pkgName}/{pkgVersion}/operators/{className}
</code></pre>

<h2 id="getting-list-of-pre-set-configurations-in-application-package">Getting List of Pre-Set Configurations in Application Package</h2>
<p>You can get a list of pre-set configurations within the Application
Package using this call.</p>
<pre><code>GET /ws/v2/appPackages/{owner}/{pkgName}/{packageVersion}/configs
</code></pre>

<p>You can also get the content of a specific pre-set configuration within
the Application Package.</p>
<pre><code> GET /ws/v2/appPackages/{owner}/{pkgName}/{pkgVersion}/configs/{configName}
</code></pre>

<h2 id="changing-pre-set-configurations-in-application-package">Changing Pre-Set Configurations in Application Package</h2>
<p>You can create or replace pre-set configurations within the Application
Package</p>
<pre><code> PUT   /ws/v2/appPackages/{owner}/{pkgName}/{pkgVersion}/configs/{configName}
</code></pre>

<p>The payload of this PUT call is the XML file that represents the pre-set configuration.  The Content-Type of the payload is "application/xml" and you can delete a pre-set configuration within the Application Package.</p>
<pre><code> DELETE /ws/v2/appPackages/{owner}/{pkgName}/{pkgVersion}/configs/{configName}
</code></pre>

<h2 id="retrieving-an-application-package">Retrieving an Application Package</h2>
<p>You can download the Application Package file.  This Application Package
is not necessarily the same file as the one that was originally uploaded
since the pre-set configurations may have been modified.</p>
<pre><code> GET /ws/v2/appPackages/{owner}/{pkgName}/{pkgVersion}/download
</code></pre>

<h2 id="launching-an-application-package">Launching an Application Package</h2>
<p>You can launch an application within an Application Package.</p>
<pre><code>POST /ws/v2/appPackages/{owner}/{pkgName}/{pkgVersion}/applications/{appName}/launch?config={configName}
</code></pre>

<p>The config parameter is optional.  If given, it must be one of the
pre-set configuration within the given Application Package.  The
Content-Type of the payload of the POST request is "application/json"
and should contain the properties to be launched with the application.
 It is of the form:</p>
<pre><code> {&quot;property-name&quot;:&quot;property-value&quot;, ... }
</code></pre>

<p>Here is an example of launching an application through curl:</p>
<pre><code> $ curl -XPOST -d'{&quot;dt.operator.console.prop.stringFormat&quot;:&quot;xyz %s&quot;}'
 http://localhost:9090/ws/v2/appPackages/dtadmin/mydtapp/1.0-SNAPSHOT/applications/MyFirstApplication/launch
</code></pre>

<p>Please refer to the <a href="https://www.google.com/url?q=https://www.datatorrent.com/docs/guides/DTGatewayAPISpecification.html&amp;sa=D&amp;usg=AFQjCNEWfN7-e7fd6MoWZjmJUE3GW7UwdQ">Gateway API reference</a> for the complete specification of the REST API.</p>
<h1 id="examining-and-launching-application-packages-through-apex-cli">Examining and Launching Application Packages Through Apex CLI</h1>
<p>If you are working with Application Packages in the local filesystem and
do not want to deal with dtGateway, you can use the Apex Command Line Interface (apex).  Please refer to the <a href="../dtgateway_api/">Gateway API</a>
to see samples for these commands.</p>
<h2 id="getting-application-package-meta-information">Getting Application Package Meta Information</h2>
<p>You can get the meta information about the Application Package using
this Apex CLI command.</p>
<pre><code> apex&gt; get-app-package-info &lt;app-package-file&gt;
</code></pre>

<h2 id="getting-available-operators-in-application-package_1">Getting Available Operators In Application Package</h2>
<p>You can get the list of available operators in the Application Package
using this command.</p>
<pre><code> apex&gt; get-app-package-operators &lt;app-package-file&gt; &lt;package-prefix&gt;
 [parent-class]
</code></pre>

<h2 id="getting-properties-of-operators-in-application-package_1">Getting Properties of Operators in Application Package</h2>
<p>You can get the list of properties of any operator in the Application
Package using this command.</p>
<p>apex&gt; get-app-package-operator-properties <app-package-file> <operator-class></p>
<h2 id="launching-an-application-package_1">Launching an Application Package</h2>
<p>You can launch an application within an Application Package.</p>
<pre><code> apex&gt; launch [-D property-name=property-value, ...] [-conf config-name]
 [-apconf config-file-within-app-package] &lt;app-package-file&gt;
 [matching-app-name]
</code></pre>

<p>Note that -conf expects a configuration file in the file system, while -apconf expects a configuration file within the app package.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../configuration_packages/" class="btn btn-neutral float-right" title="Configuration Packages">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../application_development/" class="btn btn-neutral" title="Applications"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../application_development/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../configuration_packages/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
